{"ast":null,"code":"import _classCallCheck from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/josefutleg/Desktop/projects/memelash-app/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport { _signUp, _login } from \"./services/AuthService\";\nimport GameSession from \"./components/GameSession\";\nimport { _getAvailableRooms, _joinGame, _findGame, _leaveGame } from \"./services/GameService\";\nimport socketIOClient from \"socket.io-client\";\nimport Rooms from \"./components/Rooms\";\nimport logo from \"./images/logoMeme.png\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.login = function (event) {\n      event.preventDefault();\n      var inputs = event.target.children;\n      var username = inputs[0].value;\n      var password = inputs[2].value;\n      return _login(username, password).then(function (res) {\n        if (res.token) {\n          _this.setState({\n            userId: res.userId\n          });\n\n          _this.setState({\n            username: res.username\n          });\n\n          _this.setState({\n            score: res.score\n          });\n\n          _this.setState({\n            currentGame: res.currentGame\n          });\n\n          _this.setState({\n            input: res.input\n          });\n\n          _this.setState({\n            vote: res.vote\n          });\n\n          _this.setState({\n            logged_in: true\n          }, function () {\n            var _this2 = this;\n\n            localStorage.setItem(\"token\", res.token); // alert(this.state.response);\n\n            _getAvailableRooms().then(function (resultingJSON) {\n              var arr = [];\n\n              for (var i = 0; i < resultingJSON.length; i++) {\n                if (resultingJSON[i].active === false) {\n                  arr.push(resultingJSON[i]);\n                }\n              }\n\n              _this2.setState({\n                gamesAvailable: arr\n              });\n\n              console.log(_this2.state);\n            });\n          });\n        } else {\n          alert(\"invalid username/password\");\n        }\n      });\n    };\n\n    _this.logout = function (event) {\n      event.preventDefault();\n\n      if (_this.state.currentGame !== null) {\n        _leaveGame(_this.state.currentGame, _this.state.userId, _this.state.username, _this.getToken()).then(function (rj) {\n          console.log(rj);\n        });\n\n        _this.setState({\n          userId: \"\"\n        });\n\n        _this.setState({\n          username: \"\"\n        });\n\n        _this.setState({\n          currentGame: null\n        });\n\n        _this.setState({\n          logged_in: false\n        }, function () {\n          localStorage.removeItem(\"token\");\n        });\n      } else {\n        _this.setState({\n          userId: \"\"\n        });\n\n        _this.setState({\n          username: \"\"\n        });\n\n        _this.setState({\n          currentGame: null\n        });\n\n        _this.setState({\n          logged_in: false\n        }, function () {\n          localStorage.removeItem(\"token\");\n        });\n      }\n    };\n\n    _this.changeForm = function (event) {\n      event.preventDefault();\n\n      if (_this.state.newUser === false) {\n        _this.setState({\n          newUser: true\n        });\n      } else _this.setState({\n        newUser: false\n      });\n    };\n\n    _this.signUp = function (event) {\n      event.preventDefault();\n      var inputs = event.target.children;\n      var username = inputs[0].value;\n      var password = inputs[2].value;\n      var passwordConf = inputs[4].value;\n\n      if (password === passwordConf) {\n        return _signUp(username, password).then(function (res) {\n          console.log(res);\n          alert(res.message);\n\n          _this.setState({\n            newUser: false\n          });\n        });\n      } else {\n        alert(\"your password and password confirmation have to match!\");\n      }\n    };\n\n    _this.getToken = function () {\n      return localStorage.getItem(\"token\");\n    };\n\n    _this.joinGame = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        joinedGame: true\n      });\n\n      var selectedGame = event.target.getAttribute(\"data-id\");\n      console.log(selectedGame);\n      return _findGame(selectedGame, _this.getToken()).then(function (resultingJSON) {\n        console.log(resultingJSON);\n\n        _this.setState({\n          currentGame: resultingJSON._id\n        });\n\n        var d = document.querySelector(\".roomContainer\");\n        d.classList.add(\"hidden\"); // console.log(this.state.username);\n        // console.log(this.state.userId);\n\n        _joinGame(resultingJSON._id, _this.state.userId, _this.state.username, _this.getToken()).then(function (rj) {\n          console.log(rj);\n        });\n      });\n    };\n\n    _this.leaveGame = function (event) {\n      _this.setState({\n        currentGame: null\n      });\n\n      var d = document.querySelector(\".roomContainer\");\n      d.classList.remove(\"hidden\");\n      return _leaveGame(_this.state.currentGame, _this.state.userId, _this.state.username, _this.getToken()).then(function (rj) {\n        console.log(rj);\n      });\n    };\n\n    _this.state = {\n      logged_in: false,\n      newUser: false,\n      username: \"\",\n      userId: \"\",\n      response: false,\n      endpoint: \"http://localhost:3001\",\n      score: \"\",\n      currentGame: null,\n      input: \"\",\n      vote: \"\",\n      gamesAvailable: [],\n      joinedGame: false\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var endpoint = this.state.endpoint;\n      console.log(this.state);\n      var socket = socketIOClient(endpoint);\n      console.log(this.state.response);\n      socket.on(\"FromAPI\", function (data) {\n        return _this3.setState({\n          response: \"\".concat(data)\n        });\n      });\n      socket.emit(\"user connected\", function (data) {});\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, this.state.logged_in === true && React.createElement(\"div\", {\n        className: \"loggedIn\",\n        id: \"fadeIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: logo,\n        alt: \"memelash logo\",\n        id: \"logo\",\n        style: {\n          float: \"left\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"serviceButton\",\n        id: \"logButton\",\n        onClick: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"log out\"), React.createElement(\"h4\", {\n        id: \"logInName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"hello, \", this.state.username, \"!\"))), this.state.logged_in === false && React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: logo,\n        alt: \"memelash logo\",\n        id: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), this.state.newUser === false && React.createElement(\"div\", {\n        className: \"logInForm\",\n        id: \"flyIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"login\",\n        onSubmit: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"serviceButton\",\n        id: \"logButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"log in\")), React.createElement(\"button\", {\n        onClick: this.changeForm,\n        className: \"serviceButton\",\n        id: \"newUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"new user?\")))), this.state.newUser === true && React.createElement(\"div\", {\n        className: \"signUpForm\",\n        id: \"flyIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"signUp\",\n        onSubmit: this.signUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"new username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"new password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"confirm password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"serviceButton\",\n        id: \"newUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"sign up\")), React.createElement(\"button\", {\n        className: \"serviceButton\",\n        id: \"logButton\",\n        onClick: this.changeForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"back\"))))), this.state.logged_in === true && React.createElement(\"div\", {\n        className: \"roomContainer\",\n        id: \"flyIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"available games\"), this.state.gamesAvailable.map(function (x) {\n        return React.createElement(Rooms, {\n          _id: x._id,\n          room: x.room,\n          players: x.players,\n          join: _this4.joinGame,\n          didJoin: _this4.state.joinedGame,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        });\n      })), this.state.currentGame !== null && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(GameSession, {\n        logged_in: this.state.logged_in,\n        username: this.state.username,\n        userId: this.state.userId,\n        leaveGame: this.leaveGame,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        onClick: this.check = function (event) {\n          console.log(_this4.state);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, \"test\"));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App; // http://version1.api.memegenerator.net//Generators_Search?q=funny&pageSize=25&apiKey=ed0e5625-ed2d-4049-a830-bafce8b69716","map":{"version":3,"sources":["/Users/josefutleg/Desktop/projects/memelash-app/client/src/App.js"],"names":["React","Component","_signUp","_login","GameSession","_getAvailableRooms","_joinGame","_findGame","_leaveGame","socketIOClient","Rooms","logo","App","login","event","preventDefault","inputs","target","children","username","value","password","then","res","token","setState","userId","score","currentGame","input","vote","logged_in","localStorage","setItem","resultingJSON","arr","i","length","active","push","gamesAvailable","console","log","state","alert","logout","getToken","rj","removeItem","changeForm","newUser","signUp","passwordConf","message","getItem","joinGame","joinedGame","selectedGame","getAttribute","_id","d","document","querySelector","classList","add","leaveGame","remove","response","endpoint","socket","on","data","emit","float","map","x","room","players","check"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { _signUp, _login } from \"./services/AuthService\";\nimport GameSession from \"./components/GameSession\";\n\nimport {\n  _getAvailableRooms,\n  _joinGame,\n  _findGame,\n  _leaveGame\n} from \"./services/GameService\";\nimport socketIOClient from \"socket.io-client\";\nimport Rooms from \"./components/Rooms\";\nimport logo from \"./images/logoMeme.png\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      logged_in: false,\n      newUser: false,\n      username: \"\",\n      userId: \"\",\n      response: false,\n      endpoint: \"http://localhost:3001\",\n      score: \"\",\n      currentGame: null,\n      input: \"\",\n      vote: \"\",\n      gamesAvailable: [],\n      joinedGame: false\n    };\n  }\n\n  componentDidMount() {\n    const { endpoint } = this.state;\n    console.log(this.state);\n    const socket = socketIOClient(endpoint);\n    console.log(this.state.response);\n    socket.on(\"FromAPI\", data => this.setState({ response: `${data}` }));\n    socket.emit(\"user connected\", data => {});\n  }\n\n  login = event => {\n    event.preventDefault();\n\n    let inputs = event.target.children;\n    let username = inputs[0].value;\n    let password = inputs[2].value;\n    return _login(username, password).then(res => {\n      if (res.token) {\n        this.setState({ userId: res.userId });\n        this.setState({ username: res.username });\n        this.setState({ score: res.score });\n        this.setState({ currentGame: res.currentGame });\n        this.setState({ input: res.input });\n        this.setState({ vote: res.vote });\n        this.setState({ logged_in: true }, function() {\n          localStorage.setItem(\"token\", res.token);\n          // alert(this.state.response);\n          _getAvailableRooms().then(resultingJSON => {\n            let arr = [];\n            for (let i = 0; i < resultingJSON.length; i++) {\n              if (resultingJSON[i].active === false) {\n                arr.push(resultingJSON[i]);\n              }\n            }\n            this.setState({ gamesAvailable: arr });\n            console.log(this.state);\n          });\n        });\n      } else {\n        alert(\"invalid username/password\");\n      }\n    });\n  };\n\n  logout = event => {\n    event.preventDefault();\n    if (this.state.currentGame !== null) {\n      _leaveGame(\n        this.state.currentGame,\n        this.state.userId,\n        this.state.username,\n        this.getToken()\n      ).then(rj => {\n        console.log(rj);\n      });\n      this.setState({ userId: \"\" });\n      this.setState({ username: \"\" });\n      this.setState({ currentGame: null });\n      this.setState({ logged_in: false }, function() {\n        localStorage.removeItem(\"token\");\n      });\n    } else {\n      this.setState({ userId: \"\" });\n      this.setState({ username: \"\" });\n      this.setState({ currentGame: null });\n      this.setState({ logged_in: false }, function() {\n        localStorage.removeItem(\"token\");\n      });\n    }\n  };\n\n  changeForm = event => {\n    event.preventDefault();\n    if(this.state.newUser === false){\n      this.setState({ newUser: true });\n    }else this.setState({ newUser: false});\n  };\n\n  signUp = event => {\n    event.preventDefault();\n\n    let inputs = event.target.children;\n    let username = inputs[0].value;\n    let password = inputs[2].value;\n    let passwordConf = inputs[4].value;\n\n    if (password === passwordConf) {\n      return _signUp(username, password).then(res => {\n        console.log(res);\n        alert(res.message);\n        this.setState({ newUser: false });\n      });\n    } else {\n      alert(\"your password and password confirmation have to match!\");\n    }\n  };\n  getToken = () => {\n    return localStorage.getItem(\"token\");\n  };\n\n  joinGame = event => {\n    event.preventDefault();\n    this.setState({ joinedGame: true });\n\n    let selectedGame = event.target.getAttribute(\"data-id\");\n    console.log(selectedGame);\n\n    return _findGame(selectedGame, this.getToken()).then(resultingJSON => {\n      console.log(resultingJSON);\n      this.setState({ currentGame: resultingJSON._id });\n      let d = document.querySelector(\".roomContainer\");\n      d.classList.add(\"hidden\");\n      // console.log(this.state.username);\n      // console.log(this.state.userId);\n      _joinGame(\n        resultingJSON._id,\n        this.state.userId,\n        this.state.username,\n        this.getToken()\n      ).then(rj => {\n        console.log(rj);\n      });\n    });\n  };\n\n  leaveGame = event => {\n    this.setState({ currentGame: null });\n    let d = document.querySelector(\".roomContainer\");\n    d.classList.remove(\"hidden\");\n    return _leaveGame(\n      this.state.currentGame,\n      this.state.userId,\n      this.state.username,\n      this.getToken()\n    ).then(rj => {\n      console.log(rj);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        {this.state.logged_in === true && (\n          <div className=\"loggedIn\" id=\"fadeIn\">\n            <div className=\"header\">\n              <img\n                src={logo}\n                alt=\"memelash logo\"\n                id=\"logo\"\n                style={{ float: \"left\" }}\n              />\n              <button\n                className=\"serviceButton\"\n                id=\"logButton\"\n                onClick={this.logout}\n              >\n                log out\n              </button>\n              <h4 id=\"logInName\">hello, {this.state.username}!</h4>\n            </div>\n          </div>\n        )}\n        {this.state.logged_in === false && (\n          <div className=\"form\">\n            <img src={logo} alt=\"memelash logo\" id=\"logo\" />\n            {this.state.newUser === false && (\n              <div className=\"logInForm\" id=\"flyIn\">\n                <form id=\"login\" onSubmit={this.login}>\n                  <input type=\"text\" name=\"name\" placeholder=\"username\" />\n                  <br />\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    placeholder=\"password\"\n                  />\n                  <br />\n                  <button className=\"serviceButton\" id=\"logButton\">\n                    <span>log in</span>\n                  </button>\n                  <button\n                    onClick={this.changeForm}\n                    className=\"serviceButton\"\n                    id=\"newUser\"\n                  >\n                    <span>new user?</span>\n                  </button>\n                </form>\n              </div>\n            )}\n            {this.state.newUser === true && (\n              <div className=\"signUpForm\" id=\"flyIn\">\n                <form id=\"signUp\" onSubmit={this.signUp}>\n                  <input type=\"text\" name=\"name\" placeholder=\"new username\" />\n                  <br />\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    placeholder=\"new password\"\n                  />\n                  <br />\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    placeholder=\"confirm password\"\n                  />\n                  <br />\n                  <button className=\"serviceButton\" id=\"newUser\">\n                    <span>sign up</span>\n                  </button>\n                  <button className=\"serviceButton\" id=\"logButton\" onClick={this.changeForm}>\n                    <span>back</span>\n                  </button>\n\n\n                </form>\n              </div>\n            )}\n          </div>\n        )}\n        {this.state.logged_in === true && (\n          <div className=\"roomContainer\" id=\"flyIn\">\n            <h4>available games</h4>\n            {this.state.gamesAvailable.map(x => (\n              <Rooms\n                _id={x._id}\n                room={x.room}\n                players={x.players}\n                join={this.joinGame}\n                didJoin={this.state.joinedGame}\n              />\n            ))}\n          </div>\n        )}\n\n        {this.state.currentGame !== null && (\n          <div>\n            {/* <PlayButton \n              logged_in={this.state.logged_in}\n              username={this.state.username}\n              userId={this.state.userId}\n            /> */}\n            <GameSession\n              logged_in={this.state.logged_in}\n              username={this.state.username}\n              userId={this.state.userId}\n              leaveGame={this.leaveGame}\n            />\n          </div>\n        )}\n        <button\n          onClick={\n            (this.check = event => {\n              console.log(this.state);\n            })\n          }\n        >\n          test\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n// http://version1.api.memegenerator.net//Generators_Search?q=funny&pageSize=25&apiKey=ed0e5625-ed2d-4049-a830-bafce8b69716\n"]},"metadata":{},"sourceType":"module"}