{"ast":null,"code":"import _classCallCheck from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/josefutleg/Desktop/projects/memelash-app/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport { _signUp, _login } from \"./services/AuthService\";\nimport GameSession from \"./components/GameSession\";\nimport { _getAvailableRooms, _joinGame, _findGame, _leaveGame } from \"./services/GameService\";\nimport socketIOClient from \"socket.io-client\";\nimport Rooms from \"./components/Rooms\";\nimport logo from \"./images/logoMeme.png\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.login = function (event) {\n      event.preventDefault();\n      var inputs = event.target.children;\n      var username = inputs[0].value;\n      var password = inputs[2].value;\n      return _login(username, password).then(function (res) {\n        if (res.token) {\n          _this.setState({\n            userId: res.userId\n          });\n\n          _this.setState({\n            username: res.username\n          });\n\n          _this.setState({\n            score: res.score\n          });\n\n          _this.setState({\n            currentGame: res.currentGame\n          });\n\n          _this.setState({\n            input: res.input\n          });\n\n          _this.setState({\n            vote: res.vote\n          });\n\n          _this.setState({\n            logged_in: true\n          }, function () {\n            var _this2 = this;\n\n            localStorage.setItem(\"token\", res.token); // alert(this.state.response);\n\n            _getAvailableRooms().then(function (resultingJSON) {\n              var arr = [];\n\n              for (var i = 0; i < resultingJSON.length; i++) {\n                if (resultingJSON[i].active === false) {\n                  arr.push(resultingJSON[i]);\n                }\n              }\n\n              _this2.setState({\n                gamesAvailable: arr\n              });\n\n              console.log(_this2.state);\n            });\n          });\n\n          document.querySelector(\"body\").setAttribute(\"id\", \"fadeOut\");\n          document.querySelector(\"body\").classList.remove(\"bodyBackgroundImg\");\n        } else {\n          alert(\"invalid username/password\");\n        }\n      });\n    };\n\n    _this.logout = function (event) {\n      event.preventDefault();\n\n      if (_this.state.currentGame !== null) {\n        _leaveGame(_this.state.currentGame, _this.state.userId, _this.state.username, _this.getToken()).then(function (rj) {\n          console.log(rj);\n        });\n\n        _this.setState({\n          userId: \"\"\n        });\n\n        _this.setState({\n          username: \"\"\n        });\n\n        _this.setState({\n          currentGame: null\n        });\n\n        _this.setState({\n          logged_in: false\n        }, function () {\n          localStorage.removeItem(\"token\");\n        });\n\n        document.querySelector(\"body\").classList.add(\"bodyBackgroundImg\");\n      } else {\n        _this.setState({\n          userId: \"\"\n        });\n\n        _this.setState({\n          username: \"\"\n        });\n\n        _this.setState({\n          currentGame: null\n        });\n\n        _this.setState({\n          logged_in: false\n        }, function () {\n          localStorage.removeItem(\"token\");\n        });\n\n        document.querySelector(\"body\").classList.add(\"bodyBackgroundImg\");\n      }\n    };\n\n    _this.changeForm = function (event) {\n      event.preventDefault(); // let a = document.querySelector(\".logInForm\");\n      // a.setAttribute(\"id\", \"flyIn\");\n\n      if (_this.state.newUser === false) {\n        _this.setState({\n          newUser: true\n        });\n      } else _this.setState({\n        newUser: false\n      });\n    };\n\n    _this.signUp = function (event) {\n      event.preventDefault();\n      var inputs = event.target.children;\n      var username = inputs[0].value;\n      var password = inputs[2].value;\n      var passwordConf = inputs[4].value;\n\n      if (password === passwordConf) {\n        return _signUp(username, password).then(function (res) {\n          console.log(res);\n          alert(res.message);\n\n          _this.setState({\n            newUser: false\n          });\n        });\n      } else {\n        alert(\"your password and password confirmation have to match!\");\n      }\n    };\n\n    _this.getToken = function () {\n      return localStorage.getItem(\"token\");\n    };\n\n    _this.joinGame = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        joinedGame: true\n      });\n\n      var selectedGame = event.target.getAttribute(\"data-id\");\n      console.log(selectedGame);\n      return _findGame(selectedGame, _this.getToken()).then(function (resultingJSON) {\n        console.log(resultingJSON);\n\n        _this.setState({\n          currentGame: resultingJSON._id\n        });\n\n        var d = document.querySelector(\".roomContainer\");\n        d.classList.add(\"hidden\"); // console.log(this.state.username);\n        // console.log(this.state.userId);\n\n        _joinGame(resultingJSON._id, _this.state.userId, _this.state.username, _this.getToken()).then(function (rj) {\n          console.log(rj);\n        });\n      });\n    };\n\n    _this.leaveGame = function (event) {\n      _this.setState({\n        currentGame: null\n      });\n\n      var d = document.querySelector(\".roomContainer\");\n      d.classList.remove(\"hidden\");\n      return _leaveGame(_this.state.currentGame, _this.state.userId, _this.state.username, _this.getToken()).then(function (rj) {\n        console.log(rj);\n      });\n    };\n\n    _this.pageLoad = function () {\n      setTimeout(function () {\n        this.setState({\n          pageLoaded: true\n        });\n      }.bind(_assertThisInitialized(_assertThisInitialized(_this))), 2000);\n    };\n\n    _this.state = {\n      logged_in: false,\n      pageLoaded: false,\n      newUser: false,\n      username: \"\",\n      userId: \"\",\n      response: false,\n      endpoint: \"http://localhost:3001\",\n      score: \"\",\n      currentGame: null,\n      input: \"\",\n      vote: \"\",\n      gamesAvailable: [],\n      joinedGame: false\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var endpoint = this.state.endpoint;\n      console.log(this.state);\n      var socket = socketIOClient(endpoint);\n      console.log(this.state.response);\n      socket.on(\"FromAPI\", function (data) {\n        return _this3.setState({\n          response: \"\".concat(data)\n        });\n      });\n      socket.emit(\"user connected\", function (data) {});\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        onLoad: this.pageLoad,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, this.state.logged_in === true && React.createElement(\"div\", {\n        className: \"loggedIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: logo,\n        alt: \"memelash logo\",\n        id: \"logo2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"serviceButton\",\n        id: \"logButton\",\n        onClick: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"log out\")), React.createElement(\"h4\", {\n        id: \"logInName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"hello, \", this.state.username, \"!\"), React.createElement(\"div\", {\n        className: \"headerLine\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }))), this.state.logged_in === false && React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: logo,\n        alt: \"memelash logo\",\n        id: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), this.state.newUser === false && this.state.pageLoaded === true && React.createElement(\"div\", {\n        className: \"logInForm\",\n        id: \"flyIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"login\",\n        onSubmit: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"serviceButton\",\n        id: \"logButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"log in\")), React.createElement(\"button\", {\n        onClick: this.changeForm,\n        className: \"serviceButton\",\n        id: \"newUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"new user?\")))), this.state.newUser === true && React.createElement(\"div\", {\n        className: \"signUpForm\",\n        id: \"flyIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"signUp\",\n        onSubmit: this.signUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"new username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"new password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"confirm password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"serviceButton\",\n        id: \"newUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"sign up\")), React.createElement(\"button\", {\n        className: \"serviceButton\",\n        id: \"logButton\",\n        onClick: this.changeForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \"back\"))))), this.state.logged_in === true && React.createElement(\"div\", {\n        className: \"roomContainer\",\n        id: \"flyIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"available game rooms\"), this.state.gamesAvailable.map(function (x) {\n        return React.createElement(Rooms, {\n          _id: x._id,\n          room: x.room,\n          players: x.players,\n          join: _this4.joinGame,\n          didJoin: _this4.state.joinedGame,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271\n          },\n          __self: this\n        });\n      })), this.state.currentGame !== null && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(GameSession, {\n        logged_in: this.state.logged_in,\n        username: this.state.username,\n        userId: this.state.userId,\n        leaveGame: this.leaveGame,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App; // http://version1.api.memegenerator.net//Generators_Search?q=funny&pageSize=25&apiKey=ed0e5625-ed2d-4049-a830-bafce8b69716","map":{"version":3,"sources":["/Users/josefutleg/Desktop/projects/memelash-app/client/src/App.js"],"names":["React","Component","_signUp","_login","GameSession","_getAvailableRooms","_joinGame","_findGame","_leaveGame","socketIOClient","Rooms","logo","App","login","event","preventDefault","inputs","target","children","username","value","password","then","res","token","setState","userId","score","currentGame","input","vote","logged_in","localStorage","setItem","resultingJSON","arr","i","length","active","push","gamesAvailable","console","log","state","document","querySelector","setAttribute","classList","remove","alert","logout","getToken","rj","removeItem","add","changeForm","newUser","signUp","passwordConf","message","getItem","joinGame","joinedGame","selectedGame","getAttribute","_id","d","leaveGame","pageLoad","setTimeout","pageLoaded","bind","response","endpoint","socket","on","data","emit","map","x","room","players"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { _signUp, _login } from \"./services/AuthService\";\nimport GameSession from \"./components/GameSession\";\n\nimport {\n  _getAvailableRooms,\n  _joinGame,\n  _findGame,\n  _leaveGame\n} from \"./services/GameService\";\nimport socketIOClient from \"socket.io-client\";\nimport Rooms from \"./components/Rooms\";\nimport logo from \"./images/logoMeme.png\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      logged_in: false,\n      pageLoaded: false,\n      newUser: false,\n      username: \"\",\n      userId: \"\",\n      response: false,\n      endpoint: \"http://localhost:3001\",\n      score: \"\",\n      currentGame: null,\n      input: \"\",\n      vote: \"\",\n      gamesAvailable: [],\n      joinedGame: false\n    };\n  }\n\n  componentDidMount() {\n    const { endpoint } = this.state;\n    console.log(this.state);\n    const socket = socketIOClient(endpoint);\n    console.log(this.state.response);\n    socket.on(\"FromAPI\", data => this.setState({ response: `${data}` }));\n    socket.emit(\"user connected\", data => {});\n  }\n\n  login = event => {\n    event.preventDefault();\n\n    let inputs = event.target.children;\n    let username = inputs[0].value;\n    let password = inputs[2].value;\n    return _login(username, password).then(res => {\n      if (res.token) {\n        this.setState({ userId: res.userId });\n        this.setState({ username: res.username });\n        this.setState({ score: res.score });\n        this.setState({ currentGame: res.currentGame });\n        this.setState({ input: res.input });\n        this.setState({ vote: res.vote });\n        this.setState({ logged_in: true }, function() {\n          localStorage.setItem(\"token\", res.token);\n          // alert(this.state.response);\n          _getAvailableRooms().then(resultingJSON => {\n            let arr = [];\n            for (let i = 0; i < resultingJSON.length; i++) {\n              if (resultingJSON[i].active === false) {\n                arr.push(resultingJSON[i]);\n              }\n            }\n            this.setState({ gamesAvailable: arr });\n            console.log(this.state);\n          });\n        });\n        document.querySelector(\"body\").setAttribute(\"id\", \"fadeOut\");        \n        document.querySelector(\"body\").classList.remove(\"bodyBackgroundImg\");\n      } else {\n        alert(\"invalid username/password\");\n      }\n    });\n  };\n\n  logout = event => {\n    event.preventDefault();\n    if (this.state.currentGame !== null) {\n      _leaveGame(\n        this.state.currentGame,\n        this.state.userId,\n        this.state.username,\n        this.getToken()\n      ).then(rj => {\n        console.log(rj);\n      });\n      this.setState({ userId: \"\" });\n      this.setState({ username: \"\" });\n      this.setState({ currentGame: null });\n      this.setState({ logged_in: false }, function() {\n        localStorage.removeItem(\"token\");\n      });\n      document.querySelector(\"body\").classList.add(\"bodyBackgroundImg\");\n    } else {\n      this.setState({ userId: \"\" });\n      this.setState({ username: \"\" });\n      this.setState({ currentGame: null });\n      this.setState({ logged_in: false }, function() {\n        localStorage.removeItem(\"token\");\n      });\n      document.querySelector(\"body\").classList.add(\"bodyBackgroundImg\");\n    }\n  };\n\n  changeForm = event => {\n    event.preventDefault();\n    // let a = document.querySelector(\".logInForm\");\n    // a.setAttribute(\"id\", \"flyIn\");\n    if (this.state.newUser === false) {\n      this.setState({ newUser: true });\n    } else this.setState({ newUser: false });\n  };\n\n  signUp = event => {\n    event.preventDefault();\n\n    let inputs = event.target.children;\n    let username = inputs[0].value;\n    let password = inputs[2].value;\n    let passwordConf = inputs[4].value;\n\n    if (password === passwordConf) {\n      return _signUp(username, password).then(res => {\n        console.log(res);\n        alert(res.message);\n        this.setState({ newUser: false });\n      });\n    } else {\n      alert(\"your password and password confirmation have to match!\");\n    }\n  };\n  getToken = () => {\n    return localStorage.getItem(\"token\");\n  };\n\n  joinGame = event => {\n    event.preventDefault();\n    this.setState({ joinedGame: true });\n\n    let selectedGame = event.target.getAttribute(\"data-id\");\n    console.log(selectedGame);\n\n    return _findGame(selectedGame, this.getToken()).then(resultingJSON => {\n      console.log(resultingJSON);\n      this.setState({ currentGame: resultingJSON._id });\n      let d = document.querySelector(\".roomContainer\");\n      d.classList.add(\"hidden\");\n      // console.log(this.state.username);\n      // console.log(this.state.userId);\n      _joinGame(\n        resultingJSON._id,\n        this.state.userId,\n        this.state.username,\n        this.getToken()\n      ).then(rj => {\n        console.log(rj);\n      });\n    });\n  };\n\n  leaveGame = event => {\n    this.setState({ currentGame: null });\n    let d = document.querySelector(\".roomContainer\");\n    d.classList.remove(\"hidden\");\n    return _leaveGame(\n      this.state.currentGame,\n      this.state.userId,\n      this.state.username,\n      this.getToken()\n    ).then(rj => {\n      console.log(rj);\n    });\n  };\n\n  pageLoad = () => {\n    setTimeout(\n      function() {\n        this.setState({ pageLoaded: true });\n      }.bind(this),\n      2000\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"App\" onLoad={this.pageLoad}>\n        {this.state.logged_in === true && (\n          <div className=\"loggedIn\">\n            <div className=\"header\">\n              <img src={logo} alt=\"memelash logo\" id=\"logo2\" />\n              <button\n                className=\"serviceButton\"\n                id=\"logButton\"\n                onClick={this.logout}\n              >\n                <span>log out</span>\n              </button>\n              <h4 id=\"logInName\">hello, {this.state.username}!</h4>\n              <div className=\"headerLine\" />\n            </div>\n          </div>\n        )}\n        {this.state.logged_in === false && (\n          <div className=\"form\">\n            <img src={logo} alt=\"memelash logo\" id=\"logo\" />\n            {this.state.newUser === false && this.state.pageLoaded === true && (\n              <div className=\"logInForm\" id=\"flyIn\">\n                <form id=\"login\" onSubmit={this.login}>\n                  <input type=\"text\" name=\"name\" placeholder=\"username\" />\n                  <br />\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    placeholder=\"password\"\n                  />\n                  <br />\n                  <button className=\"serviceButton\" id=\"logButton\">\n                    <span>log in</span>\n                  </button>\n                  <button\n                    onClick={this.changeForm}\n                    className=\"serviceButton\"\n                    id=\"newUser\"\n                  >\n                    <span>new user?</span>\n                  </button>\n                </form>\n              </div>\n            )}\n            {this.state.newUser === true && (\n              <div className=\"signUpForm\" id=\"flyIn\">\n                <form id=\"signUp\" onSubmit={this.signUp}>\n                  <input type=\"text\" name=\"name\" placeholder=\"new username\" />\n                  <br />\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    placeholder=\"new password\"\n                  />\n                  <br />\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    placeholder=\"confirm password\"\n                  />\n                  <br />\n                  <button className=\"serviceButton\" id=\"newUser\">\n                    <span>sign up</span>\n                  </button>\n                  <button\n                    className=\"serviceButton\"\n                    id=\"logButton\"\n                    onClick={this.changeForm}\n                  >\n                    <span>back</span>\n                  </button>\n                </form>\n              </div>\n            )}\n          </div>\n        )}\n        {this.state.logged_in === true && (\n          <div className=\"roomContainer\" id=\"flyIn\">\n            <h4>available game rooms</h4>\n            {this.state.gamesAvailable.map(x => (\n              <Rooms\n                _id={x._id}\n                room={x.room}\n                players={x.players}\n                join={this.joinGame}\n                didJoin={this.state.joinedGame}\n              />\n            ))}\n          </div>\n        )}\n\n        {this.state.currentGame !== null && (\n          <div>\n            {/* <PlayButton \n              logged_in={this.state.logged_in}\n              username={this.state.username}\n              userId={this.state.userId}\n            /> */}\n            <GameSession\n              logged_in={this.state.logged_in}\n              username={this.state.username}\n              userId={this.state.userId}\n              leaveGame={this.leaveGame}\n            />\n          </div>\n        )}\n        {/* <button\n          onClick={\n            (this.check = event => {\n              console.log(this.state);\n            })\n          }\n        >\n          test\n        </button> */}\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n// http://version1.api.memegenerator.net//Generators_Search?q=funny&pageSize=25&apiKey=ed0e5625-ed2d-4049-a830-bafce8b69716\n"]},"metadata":{},"sourceType":"module"}