{"ast":null,"code":"import _classCallCheck from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/josefutleg/Desktop/projects/memelash-app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/josefutleg/Desktop/projects/memelash-app/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport { _signUp, _login } from \"./services/AuthService\";\nimport GameSession from './components/GameSession';\nimport { _getAvailableRooms, _joinGame, _findGame, _leaveGame } from \"./services/GameService\";\nimport socketIOClient from \"socket.io-client\";\nimport Rooms from \"./components/Rooms\";\nimport logo from \"./images/logoMeme.png\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.login = function (event) {\n      event.preventDefault();\n      var inputs = event.target.children;\n      var username = inputs[0].value;\n      var password = inputs[2].value;\n      return _login(username, password).then(function (res) {\n        if (res.token) {\n          _this.setState({\n            userId: res.userId\n          });\n\n          _this.setState({\n            username: res.username\n          });\n\n          _this.setState({\n            score: res.score\n          });\n\n          _this.setState({\n            currentGame: res.currentGame\n          });\n\n          _this.setState({\n            input: res.input\n          });\n\n          _this.setState({\n            vote: res.vote\n          });\n\n          _this.setState({\n            logged_in: true\n          }, function () {\n            var _this2 = this;\n\n            localStorage.setItem(\"token\", res.token);\n            alert(this.state.response);\n\n            _getAvailableRooms().then(function (resultingJSON) {\n              var arr = [];\n\n              for (var i = 0; i < resultingJSON.length; i++) {\n                if (resultingJSON[i].active === false) {\n                  arr.push(resultingJSON[i]);\n                }\n              }\n\n              _this2.setState({\n                gamesAvailable: arr\n              });\n\n              console.log(_this2.state);\n            });\n          });\n        } else {\n          alert(\"invalid username/password\");\n        }\n      });\n    };\n\n    _this.logout = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        userId: \"\"\n      });\n\n      _this.setState({\n        username: \"\"\n      });\n\n      _this.setState({\n        logged_in: false\n      }, function () {\n        localStorage.removeItem(\"token\");\n      });\n    };\n\n    _this.signUp = function (event) {\n      event.preventDefault();\n      var inputs = event.target.children;\n      var username = inputs[0].value;\n      var password = inputs[2].value;\n      var passwordConf = inputs[4].value;\n\n      if (password === passwordConf) {\n        return _signUp(username, password).then(function (res) {\n          console.log(res);\n          alert(res.message);\n        });\n      } else {\n        alert(\"your password and password confirmation have to match!\");\n      }\n    };\n\n    _this.getToken = function () {\n      return localStorage.getItem(\"token\");\n    };\n\n    _this.joinGame = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        joinedGame: true\n      });\n\n      var selectedGame = event.target.getAttribute(\"data-id\");\n      console.log(selectedGame);\n      return _findGame(selectedGame, _this.getToken()).then(function (resultingJSON) {\n        console.log(resultingJSON);\n\n        _this.setState({\n          currentGame: resultingJSON._id\n        });\n\n        var d = document.querySelector(\".roomContainer\");\n        d.classList.add(\"hidden\"); // console.log(this.state.username);\n        // console.log(this.state.userId);\n\n        _joinGame(resultingJSON._id, _this.state.userId, _this.state.username, _this.getToken()).then(function (rj) {\n          console.log(rj);\n        });\n      });\n    };\n\n    _this.leaveGame = function (event) {\n      _this.setState({\n        currentGame: null\n      });\n\n      var d = document.querySelector(\".roomContainer\");\n      d.classList.remove(\"hidden\");\n      return _leaveGame(_this.state.currentGame, _this.state.userId, _this.state.username, _this.getToken()).then(function (rj) {\n        console.log(rj);\n      });\n    };\n\n    _this.state = {\n      logged_in: false,\n      newUser: false,\n      username: \"\",\n      userId: \"\",\n      response: false,\n      endpoint: \"http://localhost:3001\",\n      score: \"\",\n      currentGame: null,\n      input: \"\",\n      vote: \"\",\n      gamesAvailable: [],\n      joinedGame: false\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var endpoint = this.state.endpoint;\n      console.log(this.state);\n      var socket = socketIOClient(endpoint);\n      console.log(this.state.response);\n      socket.on(\"FromAPI\", function (data) {\n        return _this3.setState({\n          response: \"\".concat(data)\n        });\n      });\n      socket.emit(\"user connected\", function (data) {});\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, this.state.logged_in === true && React.createElement(\"div\", {\n        className: \"loggedIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"log out\"), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"hello, \", this.state.username, \"!\"))), this.state.logged_in === false && React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: logo,\n        id: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"logInForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"login\",\n        onSubmit: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"log in\"), React.createElement(\"button\", {\n        onClick: this.newUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"sign up\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), this.state.newUser === true && React.createElement(\"div\", {\n        className: \"signUpForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"signUp\",\n        onSubmit: this.signUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"new username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"new password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"confirm password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"sign up\")))), this.state.logged_in === true && React.createElement(\"div\", {\n        className: \"roomContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"available games\"), this.state.gamesAvailable.map(function (x) {\n        return React.createElement(Rooms, {\n          _id: x._id,\n          room: x.room,\n          players: x.players,\n          join: _this4.joinGame,\n          didJoin: _this4.state.joinedGame,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        });\n      })), this.state.currentGame !== null && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(GameSession, {\n        logged_in: this.state.logged_in,\n        username: this.state.username,\n        userId: this.state.userId,\n        leaveGame: this.leaveGame,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        onClick: this.check = function (event) {\n          console.log(_this4.state);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"test\"));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App; // http://version1.api.memegenerator.net//Generators_Search?q=funny&pageSize=25&apiKey=ed0e5625-ed2d-4049-a830-bafce8b69716","map":{"version":3,"sources":["/Users/josefutleg/Desktop/projects/memelash-app/client/src/App.js"],"names":["React","Component","_signUp","_login","GameSession","_getAvailableRooms","_joinGame","_findGame","_leaveGame","socketIOClient","Rooms","logo","App","login","event","preventDefault","inputs","target","children","username","value","password","then","res","token","setState","userId","score","currentGame","input","vote","logged_in","localStorage","setItem","alert","state","response","resultingJSON","arr","i","length","active","push","gamesAvailable","console","log","logout","removeItem","signUp","passwordConf","message","getToken","getItem","joinGame","joinedGame","selectedGame","getAttribute","_id","d","document","querySelector","classList","add","rj","leaveGame","remove","newUser","endpoint","socket","on","data","emit","map","x","room","players","check"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { _signUp, _login } from \"./services/AuthService\";\nimport GameSession from './components/GameSession';\n\nimport {\n  _getAvailableRooms,\n  _joinGame,\n  _findGame,\n  _leaveGame\n} from \"./services/GameService\";\nimport socketIOClient from \"socket.io-client\";\nimport Rooms from \"./components/Rooms\";\nimport logo from \"./images/logoMeme.png\"\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      logged_in: false,\n      newUser: false,\n      username: \"\",\n      userId: \"\",\n      response: false,\n      endpoint: \"http://localhost:3001\",\n      score: \"\",\n      currentGame: null,\n      input: \"\",\n      vote: \"\",\n      gamesAvailable: [],\n      joinedGame: false\n    };\n  }\n\n  componentDidMount() {\n    const { endpoint } = this.state;\n    console.log(this.state);\n    const socket = socketIOClient(endpoint);\n    console.log(this.state.response);\n    socket.on(\"FromAPI\", data => this.setState({ response: `${data}` }));\n    socket.emit(\"user connected\", data => {\n      \n    });\n  }\n\n  login = event => {\n    event.preventDefault();\n\n    let inputs = event.target.children;\n    let username = inputs[0].value;\n    let password = inputs[2].value;\n    return _login(username, password).then(res => {\n      if (res.token) {\n        this.setState({ userId: res.userId });\n        this.setState({ username: res.username });\n        this.setState({ score: res.score });\n        this.setState({ currentGame: res.currentGame });\n        this.setState({ input: res.input });\n        this.setState({ vote: res.vote });\n        this.setState({ logged_in: true }, function() {\n          localStorage.setItem(\"token\", res.token);\n          alert(this.state.response);\n          _getAvailableRooms().then(resultingJSON => {\n            let arr = [];\n            for (let i = 0; i < resultingJSON.length; i++) {\n              if (resultingJSON[i].active === false) {\n                arr.push(resultingJSON[i]);\n              }\n            }\n            this.setState({ gamesAvailable: arr });\n            console.log(this.state);\n          });\n        });\n      } else {\n        alert(\"invalid username/password\");\n      }\n    });\n  };\n\n  logout = event => {\n    event.preventDefault();\n    this.setState({ userId: \"\" });\n    this.setState({ username: \"\" });\n    this.setState({ logged_in: false }, function() {\n      localStorage.removeItem(\"token\");\n    });\n  };\n\n  signUp = event => {\n    event.preventDefault();\n\n    let inputs = event.target.children;\n    let username = inputs[0].value;\n    let password = inputs[2].value;\n    let passwordConf = inputs[4].value;\n\n    if (password === passwordConf) {\n      return _signUp(username, password).then(res => {\n        console.log(res);\n        alert(res.message);\n      });\n    } else {\n      alert(\"your password and password confirmation have to match!\");\n    }\n  };\n  getToken = () => {\n    return localStorage.getItem(\"token\");\n  };\n\n  joinGame = event => {\n    event.preventDefault();\n    this.setState({joinedGame: true})\n\n    let selectedGame = event.target.getAttribute(\"data-id\");\n    console.log(selectedGame);\n\n    return _findGame(selectedGame, this.getToken()).then(resultingJSON => {\n      console.log(resultingJSON);\n      this.setState({ currentGame: resultingJSON._id });\n      let d = document.querySelector(\".roomContainer\");\n      d.classList.add(\"hidden\");\n      // console.log(this.state.username);\n      // console.log(this.state.userId);\n      _joinGame(\n        resultingJSON._id,\n        this.state.userId,\n        this.state.username,\n        this.getToken()\n      ).then(rj => {\n        console.log(rj);\n      });\n    });\n  };\n\n  leaveGame = event => {\n    this.setState({ currentGame: null });\n    let d = document.querySelector(\".roomContainer\");\n    d.classList.remove(\"hidden\");\n    return _leaveGame(\n      this.state.currentGame,\n      this.state.userId,\n      this.state.username,\n      this.getToken()\n    ).then(rj => {\n      console.log(rj);\n    });\n  };\n\n\n\n\n\n  render() {\n    return (\n      <div className=\"App\">\n        {this.state.logged_in === true && (\n          <div className=\"loggedIn\">\n            <div className=\"header\">\n              <button onClick={this.logout}>log out</button>\n              <h4>hello, {this.state.username}!</h4>\n            </div>\n        </div>    \n        )}\n        {this.state.logged_in === false && (\n          <div className=\"form\">\n          <img src={logo} id=\"logo\"></img>\n            <div className=\"logInForm\">\n              <form id=\"login\" onSubmit={this.login}>\n                <input type=\"text\" name=\"name\" placeholder=\"username\" />\n                <br />\n                <input type=\"password\" name=\"password\" placeholder=\"password\" />\n                <br />\n                <button>log in</button>\n                <button onClick={this.newUser}>sign up</button>\n              </form>\n            </div>\n            <br />\n            {this.state.newUser === true && (\n              <div className=\"signUpForm\">\n              <form id=\"signUp\" onSubmit={this.signUp}>\n                <input type=\"text\" name=\"name\" placeholder=\"new username\" />\n                <br />\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"new password\"\n                />\n                <br />\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"confirm password\"\n                />\n                <br />\n                <button>sign up</button>\n              </form>\n            </div>\n            )}\n            \n          </div>\n        )}\n        {this.state.logged_in === true && (\n          <div className=\"roomContainer\">\n            <h3>available games</h3>\n            {this.state.gamesAvailable.map(x => (\n              <Rooms\n                _id={x._id}\n                room={x.room}\n                players={x.players}\n                join={this.joinGame}\n                didJoin = {this.state.joinedGame}\n              />\n            ))}\n          </div>\n        )}\n\n        {this.state.currentGame !== null && (\n          <div>\n            {/* <PlayButton \n              logged_in={this.state.logged_in}\n              username={this.state.username}\n              userId={this.state.userId}\n            /> */}\n            <GameSession \n              logged_in={this.state.logged_in}\n              username={this.state.username}\n              userId={this.state.userId}\n              leaveGame={this.leaveGame}\n            />\n          </div>\n        )}\n        <button\n          onClick={\n            (this.check = event => {\n              console.log(this.state);\n            })\n          }\n        >\n          test\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n\n// http://version1.api.memegenerator.net//Generators_Search?q=funny&pageSize=25&apiKey=ed0e5625-ed2d-4049-a830-bafce8b69716"]},"metadata":{},"sourceType":"module"}